<div *ngIf="products$ | async as products" class="products-container">
  <ng-container *ngIf="products.length; else noProducts">
    <button mat-button [matMenuTriggerFor]="add">
      Add new product
      <mat-icon>keyboard_arrow_down</mat-icon>
    </button>
    <div class="row">
      <div class="col-md-3" *ngFor="let product of products">
        <div class="product">
          <app-product [product]="product"></app-product>
          <mat-icon (click)="deleteProduct(product.id!)">delete</mat-icon>
        </div>
        <div class="margin"></div>
      </div>
    </div>
  </ng-container>
</div>
<ng-template #noProducts>
  <div class="products-message">
    <span>You have no products, but you can</span>
    <button mat-button [matMenuTriggerFor]="add" #clickMenuTrigger="matMenuTrigger">
      Add new product
      <mat-icon>keyboard_arrow_down</mat-icon>
    </button>
  </div>
</ng-template>

<mat-menu #add="matMenu">
  <app-edit (click)="$event.stopPropagation()" (closeMenu)="closeMenu()"></app-edit>
</mat-menu>
<app-loader *ngIf="isLoading$ | async"></app-loader>